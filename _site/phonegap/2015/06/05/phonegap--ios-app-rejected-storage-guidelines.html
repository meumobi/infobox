<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Avoid PhoneGap iOS App to backup webstorage and downloaded files</title>
	
	<meta name="author" content="meumobi">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
	<link rel="shortcut icon" href="/favicon.png">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/meumobi">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/meumobi">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:contact@meumobi.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="http://www.gravatar.com/avatar/1cd012be2382e755aa763c66acc7cfa6?s=35" class="img-circle" />
				
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="/assets/media/Icon-72@2x.png" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	Sharing mobile Experiences
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/meumobi">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/meumobi">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:contact@meumobi.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Avoid PhoneGap iOS App to backup webstorage and downloaded files </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   June 
	   5th,
	   
	   2015
	 </span>
	  <div class="article_body">
	  <p>After months developing mobile Apps, using PhoneGap, we&#39;ve experienced today our first Rejection by Apple.:</p>

<blockquote>
<p>On launch and content download (i.e. presentations), your app stores 15.85 MB, which does not comply with the iOS Data Storage Guidelines.  </p>

<p>Please verify that only the content that the user creates using your app, e.g., documents, new files, edits, etc. is backed up by iCloud as required by the iOS Data Storage Guidelines.</p>
</blockquote>

<h1>Avoid iOS App downloaded files to be backuped</h1>

<p>Humm.. that&#39;s right. Our PhoneGap App uses <a href="https://github.com/apache/cordova-plugin-file">Cordova File Plugin</a> to store downloaded files on cordova.file.documentsDirectory. And as correctly explained on <a href="https://github.com/apache/cordova-plugin-file">Cordova File Plugin</a> doc, the documentsDirectory is Synced.
We&#39;ve checked it following these instructions: </p>

<ul>
<li>Install and launch your app</li>
<li>Go to Settings &gt; iCloud &gt; Storage &amp; Backup &gt; Manage Storage</li>
<li>If necessary, tap &quot;Show all apps&quot;</li>
<li>Check your app&#39;s storage, download files to see it growing</li>
</ul>

<h2>How to fix it</h2>

<p><strong>we&#39;ve replaced cordova.file.documentsDirectory by cordova.file.dataDirectory</strong></p>

<p>Et voila!! Our <a href="http://infomobi.strikingly.com">infoMobi</a> users will enjoy downloading files for offline read.</p>

<h1>Avoid iOS App WebStorage to be backuped</h1>

<p>During our investigation we&#39;ve seen that localStorage by default is also backuped on cloud, see <a href="https://cordova.apache.org/docs/en/4.0.0/guide_platforms_ios_config.md.html">Cordova iOS Configuration</a>. It can lead to an issue if localStorage of app is synced between multiples devices. <a href="https://developer.apple.com/library/ios/qa/qa1719/_index.html">Apple&#39;s Q&amp;A</a> explains</p>

<blockquote>
<p>only user data may be stored to the iCloud. Data that is needed for offline purposes may not be stored in the iCloud. </p>
</blockquote>

<p>More details about <a href="http://stackoverflow.com/questions/7813258/does-phonegap-localstorage-save-to-icloud">localStorage management on iOS</a>:</p>

<blockquote>
<p>localStorage in iOS is just a SQLite db file that is stored somewhere on the device.</p>

<p>Phonegap writes the localStorage.db file into the Documents directory for your app.</p>

<p>Specifically: Documents/Backups/localstorage.appdata.db</p>

<p>Since the Documents directory is specific for each app, it will be automatically saved to iCloud.</p>
</blockquote>

<h2>How to fix it</h2>

<p>To disable web storage backup to iCloud, set the BackupWebStorage preference to &quot;local&quot; in the config.xml file.</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;preference</span> <span class="na">name=</span><span class="s">&quot;BackupWebStorage&quot;</span> <span class="na">value=</span><span class="s">&quot;local&quot;</span><span class="nt">/ &gt;</span>
</code></pre></div>
<p>OBS: An issue is open about:</p>

<ul>
<li>PhoneGap Build GitHub: https://github.com/phonegap/build/issues/338</li>
<li>PhoneGap Build Community issue: http://community.phonegap.com/nitobi/topics/backupwebstorage<em>and</em>ios</li>
</ul>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#phonegap-ref">
					phonegap <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#localStorage-ref">
					localStorage <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#Download Files-ref">
					Download Files <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#WebStorage-ref">
					WebStorage <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#config.xml-ref">
					config.xml <span>(2)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Avoid PhoneGap iOS App to backup webstorage and downloaded files&via=meumobi"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
				<img src="http://www.gravatar.com/avatar/1cd012be2382e755aa763c66acc7cfa6" class="img-rounded author-image" />
        <h4 class="section-title author-name">Victor Dias</h4>
        <p class="author-bio">Sharing mobile Experiences</p>
			  
			 <i class="fa fa-twitter fa-lg"></i> <a href="https://twitter.com/meumobi">Follow me</a>
			  
      </section>
    </div>

<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	    var disqus_shortname = 'meumobi-dev';
	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous disabled"><a>&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/android/googleplay/phonegapbuild/2015/06/08/target-android-versions-ensure-distribution-tablets.html" title="Target Android Versions to ensure distribution to tablets">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>



		<footer>
			<hr/>
			<p>
				&copy; 2015 meumobi with Jekyll. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>

